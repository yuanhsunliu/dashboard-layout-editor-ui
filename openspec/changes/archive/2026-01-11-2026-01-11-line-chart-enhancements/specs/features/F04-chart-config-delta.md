# F04: Chart Configuration - Delta

## 變更摘要

Line Chart 設定面板新增「進階設定」區塊，支援階層式 X 軸、雙 Y 軸、Series 分群設定。

## UI/UX Spec 變更

### 設定面板（更新後）

```
┌────────────────────────────────────┐
│  圖表設定                    [X]   │
├────────────────────────────────────┤
│                                    │
│  圖表類型                          │
│  ┌──────────────────────────────┐  │
│  │ 📈 折線圖              ▼    │  │
│  └──────────────────────────────┘  │
│                                    │
│  資料來源                          │
│  ┌──────────────────────────────┐  │
│  │ 實驗數據               ▼    │  │
│  └──────────────────────────────┘  │
│                                    │
│  ─────────────────────────────     │
│                                    │
│  X 軸欄位                          │  ← 未啟用階層式時顯示
│  ┌──────────────────────────────┐  │
│  │ date                     ▼  │  │
│  └──────────────────────────────┘  │
│                                    │
│  Y 軸欄位                          │  ← 未啟用雙軸時顯示
│  ┌──────────────────────────────┐  │
│  │ ☑ revenue                   │  │
│  │ ☑ profit                    │  │
│  └──────────────────────────────┘  │
│                                    │
│  ▶ 進階設定                        │  ← 收合區塊
│                                    │
│  ─────────────────────────────     │
│                                    │
│  預覽                              │
│  ┌──────────────────────────────┐  │
│  │      📈 (即時預覽圖表)       │  │
│  └──────────────────────────────┘  │
│                                    │
│         [取消]    [儲存]           │
└────────────────────────────────────┘
```

### 進階設定（展開後）

```
┌────────────────────────────────────┐
│  ▼ 進階設定                        │
│  ┌──────────────────────────────┐  │
│  │                              │  │
│  │  ☐ 啟用階層式 X 軸           │  │
│  │                              │  │
│  │  ☐ 啟用雙 Y 軸               │  │
│  │                              │  │
│  │  ☐ 啟用 Series 分群          │  │
│  │                              │  │
│  └──────────────────────────────┘  │
└────────────────────────────────────┘
```

### 啟用階層式 X 軸後

```
│  ☑ 啟用階層式 X 軸                 │
│                                    │
│  外層 X 軸欄位                     │
│  ┌─────────────────┐ ┌──────────┐  │
│  │ concentration ▼ │ │ 遞增 ▼  │  │
│  └─────────────────┘ └──────────┘  │
│                                    │
│  內層 X 軸欄位                     │
│  ┌─────────────────┐ ┌──────────┐  │
│  │ replicate    ▼  │ │ 遞增 ▼  │  │
│  └─────────────────┘ └──────────┘  │
```

### 啟用雙 Y 軸後

```
│  ☑ 啟用雙 Y 軸                     │
│                                    │
│  左軸欄位                          │
│  ┌──────────────────────────────┐  │
│  │ ☑ sales                     │  │
│  │ ☑ revenue                   │  │
│  └──────────────────────────────┘  │
│                                    │
│  右軸欄位                          │
│  ┌──────────────────────────────┐  │
│  │ ☑ growthRate                │  │
│  └──────────────────────────────┘  │
```

### 啟用 Series 分群後

```
│  ☑ 啟用 Series 分群                │
│                                    │
│  分群欄位                          │
│  ┌─────────────────┐ ┌──────────┐  │
│  │ sample       ▼  │ │ 遞增 ▼  │  │
│  └─────────────────┘ └──────────┘  │
│                                    │
│  ⚠️ 啟用分群時，Y 軸只能選擇一個欄位 │
│                                    │
│  Y 軸欄位                          │  ← 改為單選
│  ┌──────────────────────────────┐  │
│  │ ○ sales                     │  │
│  │ ● value                     │  │
│  │ ○ count                     │  │
│  └──────────────────────────────┘  │
```

## 排序選項

| 選項 | 說明 |
|------|------|
| 遞增 (`asc`) | 數值由小到大，文字依字母順序 |
| 遞減 (`desc`) | 數值由大到小，文字依字母反序 |
| 依資料順序 (`data`) | 依據資料來源的原始順序（預設） |

## 欄位切換邏輯

| 開關 | 啟用時 | 停用時 |
|------|--------|--------|
| 階層式 X 軸 | 隱藏 X 軸欄位，顯示外層/內層 | 顯示 X 軸欄位 |
| 雙 Y 軸 | 隱藏 Y 軸欄位，顯示左軸/右軸 | 顯示 Y 軸欄位 |
| Series 分群 | Y 軸欄位改為單選 | Y 軸欄位為多選 |

## Acceptance Criteria 新增

### 進階設定 UI
- [ ] 進階設定區塊預設收合
- [ ] 點擊可展開/收合進階設定
- [ ] 各開關獨立控制

### 階層式 X 軸設定
- [ ] 啟用後顯示外層/內層欄位選擇
- [ ] 各層提供排序選項下拉
- [ ] 啟用後隱藏原本的 X 軸欄位

### 雙 Y 軸設定
- [ ] 啟用後顯示左軸/右軸欄位選擇
- [ ] 左軸至少選擇一個欄位
- [ ] 右軸為選填
- [ ] 啟用後隱藏原本的 Y 軸欄位

### Series 分群設定
- [ ] 啟用後顯示分群欄位選擇
- [ ] 提供排序選項下拉
- [ ] 啟用後 Y 軸欄位改為單選
- [ ] 顯示提示訊息說明限制

### 即時預覽
- [ ] 進階設定變更時即時更新預覽
- [ ] 階層式 X 軸正確顯示兩層標籤
- [ ] 雙軸正確顯示左右刻度
- [ ] 分群正確顯示多條 series
