# F02: Widget Layout

## Overview
ä½¿ç”¨è€…å¯ä»¥åœ¨ Dashboard ç·¨è¼¯é ä¸­æ–°å¢ Widgetï¼Œä¸¦é€éæ‹–æ”¾èª¿æ•´ Widget çš„ä½ç½®èˆ‡å¤§å°ã€‚

## User Stories
- ä½œç‚ºä½¿ç”¨è€…ï¼Œæˆ‘å¯ä»¥åœ¨ Dashboard ä¸­æ–°å¢ Widgetï¼Œä»¥ä¾¿æ”¾ç½®åœ–è¡¨
- ä½œç‚ºä½¿ç”¨è€…ï¼Œæˆ‘å¯ä»¥æ‹–æ”¾ Widget èª¿æ•´ä½ç½®ï¼Œä»¥ä¾¿è‡ªè¨‚ä½ˆå±€
- ä½œç‚ºä½¿ç”¨è€…ï¼Œæˆ‘å¯ä»¥èª¿æ•´ Widget å¤§å°ï¼Œä»¥ä¾¿æ§åˆ¶åœ–è¡¨é¡¯ç¤ºå€åŸŸ
- ä½œç‚ºä½¿ç”¨è€…ï¼Œæˆ‘å¯ä»¥åˆªé™¤ä¸éœ€è¦çš„ Widget

## Acceptance Criteria

### æ–°å¢ Widget
- [ ] é»æ“Šã€Œæ–°å¢ Widgetã€æŒ‰éˆ•å¯æ–°å¢ç©ºç™½ Widget
- [ ] æ–° Widget è‡ªå‹•æ”¾ç½®åœ¨å¯ç”¨ç©ºé–“
- [ ] æ–° Widget æœ‰é è¨­å¤§å° (w: 4, h: 3)

### æ‹–æ”¾ç§»å‹•
- [ ] å¯æ‹–æ›³ Widget æ¨™é¡Œåˆ—ç§»å‹•ä½ç½®
- [ ] ç§»å‹•æ™‚é¡¯ç¤ºæ”¾ç½®é è¦½
- [ ] æ”¾é–‹å¾Œ Widget å›ºå®šåœ¨æ–°ä½ç½®
- [ ] Widget ä¹‹é–“è‡ªå‹•é¿å…é‡ç–Š

### èª¿æ•´å¤§å°
- [ ] Widget å³ä¸‹è§’æœ‰ resize handle
- [ ] å¯æ‹–æ›³èª¿æ•´å¯¬åº¦èˆ‡é«˜åº¦
- [ ] æœ‰æœ€å°å°ºå¯¸é™åˆ¶ (minW: 2, minH: 2)

### åˆªé™¤ Widget
- [ ] Widget å³ä¸Šè§’æœ‰åˆªé™¤æŒ‰éˆ•
- [ ] é»æ“Šå¾Œç›´æ¥åˆªé™¤ï¼ˆç„¡ç¢ºèª Dialogï¼‰
- [ ] åˆªé™¤å¾Œå…¶ä»– Widget ä¸è‡ªå‹•é‡æ’

### ä½ˆå±€å„²å­˜
- [ ] ä½ˆå±€è®Šæ›´è‡ªå‹•åŒæ­¥åˆ°ç‹€æ…‹
- [ ] èˆ‡ F07 Persistence æ•´åˆå¾Œå¯æŒä¹…åŒ–

## UI/UX Spec

### Dashboard ç·¨è¼¯é  (`/dashboard/:id`)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›    Dashboard åç¨± âœï¸     [+ æ–°å¢ Widget] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Widget 1     [x]â”‚  â”‚ Widget 2           [x]â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚                       â”‚ â”‚
â”‚  â”‚   (åœ–è¡¨å€åŸŸ)    â”‚  â”‚      (åœ–è¡¨å€åŸŸ)       â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚                       â”‚ â”‚
â”‚  â”‚              â—¢  â”‚  â”‚                    â—¢  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Widget 3                               [x]â”‚  â”‚
â”‚  â”‚                                           â”‚  â”‚
â”‚  â”‚              (åœ–è¡¨å€åŸŸ)                   â”‚  â”‚
â”‚  â”‚                                        â—¢  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Widget å…ƒä»¶
- æ¨™é¡Œåˆ—ï¼šå¯æ‹–æ›³ç§»å‹•
- å…§å®¹å€ï¼šé¡¯ç¤ºåœ–è¡¨ï¼ˆæˆ–ç©ºç™½æç¤ºï¼‰
- åˆªé™¤æŒ‰éˆ•ï¼šå³ä¸Šè§’ X icon
- Resize handleï¼šå³ä¸‹è§’

### ç©ºç™½ Widget
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–°å¢ Widget  [x]â”‚
â”‚                 â”‚
â”‚   ğŸ“Š é»æ“Šè¨­å®š   â”‚
â”‚   é¸æ“‡åœ–è¡¨é¡å‹  â”‚
â”‚              â—¢  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Model

```typescript
// react-grid-layout æ ¼å¼
interface LayoutItem {
  i: string;      // Widget ID
  x: number;      // Grid X ä½ç½®
  y: number;      // Grid Y ä½ç½®
  w: number;      // å¯¬åº¦ (grid units)
  h: number;      // é«˜åº¦ (grid units)
  minW?: number;  // æœ€å°å¯¬åº¦
  minH?: number;  // æœ€å°é«˜åº¦
}

interface Widget {
  id: string;
  chartConfig?: ChartConfig;  // å°šæœªè¨­å®šæ™‚ç‚º undefined
}
```

### Grid è¨­å®š
```typescript
const GRID_CONFIG = {
  cols: 12,           // 12 æ¬„ grid
  rowHeight: 80,      // æ¯è¡Œé«˜åº¦ 80px
  margin: [16, 16],   // é–“è· 16px
};

const DEFAULT_WIDGET_SIZE = {
  w: 4,
  h: 3,
  minW: 2,
  minH: 2,
};
```

## State Management

```typescript
// stores/useDashboardStore.ts
interface DashboardState {
  layout: LayoutItem[];
  widgets: Widget[];
  
  // Actions
  addWidget: () => void;
  removeWidget: (id: string) => void;
  updateLayout: (layout: LayoutItem[]) => void;
}
```

## Dependencies
- T01: Project Setup
- F01: Dashboard CRUDï¼ˆéœ€è¦ Dashboard ç·¨è¼¯é ï¼‰

## Out of Scope
- Widget è¤‡è£½
- Widget é–å®šä½ç½®
- ä½ˆå±€æ¨¡æ¿
- éŸ¿æ‡‰å¼ä½ˆå±€ï¼ˆä¸åŒè¢å¹•å°ºå¯¸ï¼‰
